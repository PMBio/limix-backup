# install: ./install-dependencies.sh
language: python
# - virtualenv --python=python venv
#   - source venv/bin/activate
before_install:
  - uname -a
  - free -m
  - df -h
  - ulimit -a

  - mkdir builds
  - pushd builds

  # pip upgrade
  - virtualenv --python=python venv
  - source venv/bin/activate
  - python -V
  - pip install --upgrade pip
  - pip install --upgrade pip setuptools

  - sudo apt-get install -qq libatlas-dev libatlas-base-dev gfortran
  - sudo apt-get install libhdf5-serial-dev

  - pip install wheel
  - pip install virtualenv

  - popd

script:
  - virtualenv --python=python venv-for-wheel
  - . venv-for-wheel/bin/activate
  - pip install --upgrade numpy
  - pip install --upgrade cython
  - python setup.py bdist_wheel
  - pushd dist
  - pip install --upgrade wheel
  - travis_wait pip install --pre --upgrade --find-links . limix
  - popd
  - python -c "import test_limix; test_limix.test()"
